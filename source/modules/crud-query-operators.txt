===============
Query Operators
===============


Learning Objectives
-------------------

Upon completing this module students should understand the following types of MongoDB query operators:

- Comparison operators
- Logical operators
- Element query operators
- Operators on arrays

.. include:: /includes/student-notes.rst


Comparison Query Operators
--------------------------

- ``$lt``: Exists and is less than
- ``$lte``: Exists and is less than or equal to
- ``$gt``: Exists and is greater than
- ``$gte``: Exists and is greater than or equal to
- ``$ne``: Does not exist or does but is not equal to
- ``$in``: Exists and is in a set
- ``$nin``: Does not exist or is not in a set

.. include:: /includes/student-notes.rst


.. include:: /exercises/crud-comparison-operators.txt


Logical Query Operators
-----------------------

- ``$or``: Match either of two or more values
- ``$not``: Used with other operators
- ``$nor``: Match neither of two or more values
- ``$and``: Match both of two or more values 

  - This is the default behavior for queries specifying more than one condition.
  - Use ``$and`` if you need to include the same operator more than once in a query.

.. include:: /includes/student-notes.rst



.. include:: /exercises/crud-logical-operators.txt


Element Query Operators
-----------------------

- ``$exists``: Select documents based on the existence of a particular field.
- ``$type``: Select documents based on their type.
- See :manual:`BSON types</reference/bson-types>` for reference on types.

.. include:: /includes/student-notes.rst


Exercise: Element Operators
---------------------------

Experiment with the following.

.. code-block:: javascript

   db.testcol.drop()
   // by default the mongo shell treats all numbers as floating-point values
   db.testcol.insert( [ { a : 1 }, { b : 1 }, { a : NumberInt(2) }, { b : "b" } ] )

   db.testcol.find( { a : { $exists : true } } )   

   // type 1 is Double
   db.testcol.find( { b : { $type : 1 } } )        

   // type 2 is String
   db.testcol.find( { b : { $type : 2 } } )        

   // type 16 is 32-bit integer 
   // The mongo shell provides NumberInt() and NumberLong() to handle integers
   db.testcol.find( { a : { $type : 16 } } )       

.. include:: /includes/student-notes.rst



Array Query Operators
---------------------

- ``$all``: Array field must contain all values listed.
- ``$size``: Array must have a particular size. E.g., ``$size : 2`` means 2 elements in the array
- ``$elemMatch``: All conditions must be matched by at least one element in the array

.. include:: /includes/student-notes.rst


.. include:: /exercises/crud-array-operators.txt






