
.. include:: /modules/mongomart-node-fundamentals.txt


Lab: Improve How Reviews are Stored and Queried
-----------------------------------------------

- Initially, all reviews are stored in an "item" document, within a "reviews"
  array.  This is problematic for the cases where the number of reviews for a
  product is large.
- Create a new collection called "review" and modify the "reviews" array within
  the "item" collection to contain *only* the last ten reviews.
- Modify the application to update the last ten reviews for an item, the
  average number of stars (based on reviews) for an item, and insert the review
  into the new "review" collection

.. include:: /includes/student-notes.rst

.. only:: instructor

   .. note::

      - Solution in mongomart_node_solution handout


Lab: Use Range-Based Pagination
-------------------------------

- Pagination throughout ``MongoMart`` uses the inefficient combined ``sort()``
  and ``limit()`` methods
- Optimize MongoMart to use range-based pagination
- You may modify method names and return values for this lab

.. include:: /includes/student-notes.rst

.. only:: instructor

   .. note::

      - Solution in mongomart_node_solution handout


Lab: Related Items
------------------

- Modify each item document to include an array of "related_items" (maximum is 4).
- Related items should include other items within the same category
- Randomized items can be used if there are fewer than 4.
